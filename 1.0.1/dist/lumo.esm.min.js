const MODAL_DURATION=300;export class Modal{constructor(element,options={}){this.el=typeof element==="string"?document.querySelector(element):element;this.body=this.el.querySelector("section");this.isLocked=this.el.hasAttribute("data-locked")||options.locked}
async open(){if(this.el.hasAttribute("open"))return;this.el.setAttribute("open","open");await this._animate("open")}
async close(){if(!this.el.hasAttribute("open"))return;await this._animate("close");this.el.removeAttribute("open")}
_animate(direction){return new Promise((resolve)=>{const isOpening=direction==="open";const opacity=new Animation(new KeyframeEffect(this.el,[{opacity:isOpening?0:1},{opacity:isOpening?1:0}],{duration:MODAL_DURATION,easing:"ease"}),document.timeline);const move=new Animation(new KeyframeEffect(this.body,[{transform:`translateY(${isOpening ? "-3rem" : "0"})`},{transform:`translateY(${isOpening ? "0" : "-3rem"})`}],{duration:MODAL_DURATION,easing:"ease"}),document.timeline,);opacity.onfinish=resolve;opacity.play();move.play()})}}
export class Carousel{constructor(element){this.carousel=typeof element==="string"?document.querySelector(element):element;this.figure=this.carousel.querySelector('figure[role="group"]');this.slides=this.figure.querySelectorAll('[aria-roledescription="slide"]');this.index=0;this._initIndicators();this.show(0)}
_initIndicators(){this.indicatorsList=this.carousel.querySelector('[role="tablist"]');if(!this.indicatorsList){this.indicatorsList=document.createElement("ol");this.indicatorsList.setAttribute("role","tablist");this.slides.forEach((_,i)=>{const btn=document.createElement("button");btn.setAttribute("role","tab");btn.addEventListener("click",()=>this.show(i));const li=document.createElement("li");li.appendChild(btn);this.indicatorsList.appendChild(li)});this.carousel.appendChild(this.indicatorsList)}
this.indicatorButtons=this.indicatorsList.querySelectorAll('[role="tab"]')}
show(i){this.index=Math.max(0,Math.min(i,this.slides.length-1));this.figure.style.transform=`translateX(-${this.index * 100}%)`;this.indicatorButtons.forEach((btn,n)=>{const active=n===this.index;btn.setAttribute("aria-selected",active);btn.tabIndex=active?0:-1})}
next(){this.show(this.index+1)}
prev(){this.show(this.index-1)}}
export function initLumo(){document.addEventListener("click",(e)=>{const target=e.target;const openTrigger=target.closest("[data-target]");if(openTrigger){const m=new Modal(`#${openTrigger.dataset.target}`);m.open()}
const closeTrigger=target.closest("[data-close]");const openModalEl=document.querySelector("dialog[open]");if(openModalEl&&(closeTrigger||(target===openModalEl&&!openModalEl.hasAttribute("data-locked")))){new Modal(openModalEl).close()}
if(!target.closest("details.dropdown[open]")){document.querySelectorAll("details.dropdown[open]").forEach((d)=>d.removeAttribute("open"))}});document.querySelectorAll("article.tabs").forEach((el)=>{const tabs=el.querySelectorAll('[role="tab"]');const panels=el.querySelectorAll('[role="tabpanel"]');tabs.forEach((tab,i)=>{tab.addEventListener("click",()=>{tabs.forEach((t)=>t.setAttribute("aria-selected","false"));panels.forEach((p)=>p.setAttribute("hidden",""));tab.setAttribute("aria-selected","true");panels[i].removeAttribute("hidden")})})});document.querySelectorAll('[aria-roledescription="carousel"]').forEach((c)=>{const instance=new Carousel(c);c.querySelector("[data-next]")?.addEventListener("click",()=>instance.next());c.querySelector("[data-prev]")?.addEventListener("click",()=>instance.prev())})}